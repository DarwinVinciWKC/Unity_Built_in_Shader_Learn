Shader "UnityTrain/Fragment/Bumped Diffuse" {
    Properties {
        _Color ("Main Color", Color) = (1, 1, 1, 1)
        _MainTex ("Base (RGB)", 2D) = "white" { }
        _BumpMap ("Normalmap", 2D) = "bump" { }
    }

    SubShader {
        Tags { "RenderType" = "Opaque" }
        LOD 300

        CGPROGRAM
        #pragma surface surf Lambert

        sampler2D _MainTex;
        sampler2D _BumpMap;
        fixed4 _Color;

        struct Input {
            float2 uv_MainTex;
            float2 uv_BumpMap;
        };

        void surf(Input IN, inout SurfaceOutput o) {
            fixed4 c = tex2D(_MainTex, IN.uv_MainTex) * _Color;
            o.Albedo = c.rgb;
            o.Alpha = c.a;
            //o.Normal = UnpackNormal(tex2D(_BumpMap, IN.uv_BumpMap));//原始 
            //在UnityCG.cginc中相关UnpackNormal的算法有三个，算法不相同，下方使用了UnpackNormal的算法，其他两个分别是UnpackNormalDXT5nm和UnpackNormalmapRGorAG
            //不同的算法有不同的r,g,b分量的存放方式，不同平台会相应的使用其适合的算法
            float3 bumpCol = tex2D(_BumpMap, IN.uv_BumpMap);
            o.Normal = bumpCol.xyz * 2 - 1;
        }
        ENDCG
    }

    FallBack "Legacy Shaders/Diffuse"
}